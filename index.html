<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Clicker Game</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron&display=swap" rel="stylesheet">
<style>
:root {
  --bg-light: #f4f4f4;
  --bg-dark: #1e1e1e;
  --text-light: #000;
  --text-dark: #fff;
  --button-radius: 999px;
  --transition: 0.3s ease;
}

body {
  font-family: 'Orbitron', sans-serif;
  text-align: center;
  background-color: var(--bg-light);
  color: var(--text-light);
  margin: 0;
  transition: var(--transition);
}

body.dark {
  background-color: var(--bg-dark);
  color: var(--text-dark);
}

header, footer {
  background: #333;
  color: white;
  padding: 10px;
}

button {
  padding: 12px 24px;
  font-size: 18px;
  margin: 10px;
  cursor: pointer;
  border-radius: var(--button-radius);
  border: none;
  transition: 0.2s;
}

button:hover {
  transform: scale(1.05);
}

.click-button {
  background-color: #4caf50;
  color: white;
}

.shop-button {
  background-color: #2196f3;
  color: white;
}

.theme-button {
  background-color: #ff9800;
  color: white;
}

.reset-button {
  background-color: crimson;
  color: white;
}

.location-toggle {
  background-color: #673ab7;
  color: white;
}

.score {
  font-size: 24px;
  margin: 20px 0;
}

.message {
  font-weight: bold;
  min-height: 1.5em;
}

.highlight {
  outline: 4px solid red;
}

.prestige-notice {
  background: #ffd54f;
  padding: 10px;
  border-radius: var(--button-radius);
  font-weight: bold;
  margin-top: 10px;
}

/* –î–µ–∫–æ—Ä–∞—Ü–∏–∏ –∏ –∞–Ω–∏–º–∞—Ü–∏–∏ */
.decoration {
  position: absolute;
  font-size: 32px;
  animation: float 4s ease-in-out infinite;
  pointer-events: none;
  z-index: 0;
}

@keyframes float {
  0% { transform: translateY(0); }
  50% { transform: translateY(-20px); }
  100% { transform: translateY(0); }
}

.point-float {
  position: absolute;
  font-weight: bold;
  color: orange;
  animation: floatUp 1s ease forwards;
  pointer-events: none;
}

@keyframes floatUp {
  0% { opacity: 1; transform: translateY(0); }
  100% { opacity: 0; transform: translateY(-40px); }
}

/* –õ–µ–≤–æ–µ –º–µ–Ω—é –ª–æ–∫–∞—Ü–∏–π */
#locationMenu {
  position: fixed;
  top: 0;
  left: -250px;
  width: 250px;
  height: 100%;
  background: #673AB7;
  color: white;
  padding: 0px;
  transition: left 0.3s ease;
  z-index: 1000;
}

#locationMenu h2 {
  text-align: center;
  margin-top: 10px;
}

#locationMenu button {
  display: block;
  width: 100%;
  margin: 10px 0;
  border-radius: 12px;
  background-color: #9575cd;
  color: white;
}

#locationMenu button:hover {
  background-color: #b39ddb;
}

/* –ü—Ä–∞–≤–æ–µ –º–µ–Ω—é –º–∞–≥–∞–∑–∏–Ω–∞ */
#shopMenu {
  position: fixed;
  top: 0;
  right: -300px;
  width: 300px;
  height: 100%;
  background: #2196f3;
  color: white;
  padding: 0px;
  transition: right 0.3s ease;
  z-index: 1000;
  overflow-y: auto;
}

#shopMenu h2 {
  text-align: center;
}

#shopMenu button {
  display: block;
  width: 100%;
  margin: 10px 0;
  border-radius: 12px;
  background-color: #64b5f6;
  color: white;
}

#shopMenu button:hover {
  background-color: #90caf9;
}

#shopItems .item {
  margin: 10px 0;
  background: rgba(255,255,255,0.1);
  padding: 5px;
  border-radius: 8px;
}

/* –û–±—â–∏–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è —Ç–µ–º–Ω–æ–π/—Å–≤–µ—Ç–ª–æ–π —Ç–µ–º—ã –≤ –º–µ–Ω—é */
body.dark #locationMenu {
  background: #4527a0;
}

body.dark #shopMenu {
  background: #1976d2;
}

body.dark button.shop-button {
  background-color: #64b5f6;
  color: black;
}

body.dark button.location-toggle {
  background-color: #5e35b1;
}
</style>
</head>
<body>
<header>
  <h1>Clicker Game</h1>
  <p>–ö–ª–∏–∫–∞–π, –ø–æ–∫—É–ø–∞–π, —É–ª—É—á—à–∞–π!</p>
  <button class="theme-button" onclick="toggleTheme()">üåô / ‚òÄÔ∏è</button>
</header>

<!-- –õ–æ–∫–∞—Ü–∏–∏ —Å–ª–µ–≤–∞ -->
<div id="locationMenu">
  <h2>–õ–æ–∫–∞—Ü–∏–∏</h2>
  <button onclick="goToLocation('main.html')">–ì–ª–∞–≤–Ω–∞—è üè†</button>
  <button onclick="goToLocation('forest.html')">–õ–µ—Å üå≥</button>
  <button onclick="goToLocation('space.html')">–ö–æ—Å–º–æ—Å üöÄ</button>
  <button onclick="goToLocation('casino.html')">üé∞ –ö–∞–∑–∏–Ω–æ</button>
  <button onclick="closeLocationMenu()" style="margin-top:20px;">–ó–∞–∫—Ä—ã—Ç—å</button>
</div>

<!-- –ú–∞–≥–∞–∑–∏–Ω —Å–ø—Ä–∞–≤–∞ -->
<div id="shopMenu">
  <h2>–ú–∞–≥–∞–∑–∏–Ω</h2>
  <div style="text-align:center;">
    <button class="tab active" onclick="switchTab('click')">–£–ª—É—á—à–µ–Ω–∏—è –∫–ª–∏–∫–∞</button>
    <button class="tab" onclick="switchTab('auto')">–ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä—ã</button>
  </div>
  <div id="shopItems"></div>
  <button onclick="closeShopMenu()" style="margin-top:20px;">–ó–∞–∫—Ä—ã—Ç—å</button>
</div>

<main>
  <div class="score">
    –û—á–∫–∏: <span id="points">0</span><br>
    –ú–Ω–æ–∂–∏—Ç–µ–ª—å: <span id="multiplier">x1</span><br>
    –í—Å–µ–≥–æ: <span id="totalPoints">0</span><br>
    –ü—Ä–µ—Å—Ç–∏–∂–µ–π: <span id="prestigeCount">0</span>
  </div>

  <button class="click-button" onclick="addPoint()">–ù–∞–∂–º–∏ –º–µ–Ω—è</button>
  <div class="message" id="message"></div>

  <div style="text-align:center; margin:20px 0;">
    <button class="location-toggle" onclick="openLocationMenu()">üåç –õ–æ–∫–∞—Ü–∏–∏</button>
    <button class="shop-button" onclick="openShopMenu()">üõí –ú–∞–≥–∞–∑–∏–Ω</button>
  </div>

  <div id="prestigeNotice" class="prestige-notice" style="display:none;">
    –î–æ—Å—Ç—É–ø–µ–Ω –ø—Ä–µ—Å—Ç–∏–∂!<br>
    <button onclick="doPrestige()">–°–¥–µ–ª–∞—Ç—å –ø—Ä–µ—Å—Ç–∏–∂</button>
  </div>

  <button class="reset-button" onclick="confirmReset()">üóëÔ∏è –°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</button>
</main>

<footer>
  ¬© 2025 | –ü—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
</footer>

<audio id="clickSound" src="https://www.fesliyanstudios.com/play-mp3/387" preload="auto"></audio>

<script>
let points = 0, totalPoints = 0, clickPower = 1, prestigeLevel = 0;
let autoClickers = 0, autoClickPower = 1, autoClickCost = 500;
let clickStreak = 0, lastClickTime = 0;
let lastTime = Date.now();
let decorationsShown = [];
let shopTab = 'click';

const clickMultipliers = [
  { multiplier: 2, cost: 100 },
  { multiplier: 3, cost: 250 },
  { multiplier: 4, cost: 500 },
  { multiplier: 5, cost: 1000 },
  { multiplier: 6, cost: 2500 }
];

const autoUpgrades = [
  { power: 1, cost: 500 },
  { power: 2, cost: 800 },
  { power: 4, cost: 1300 }
];

function addPoint() {
  const now = Date.now();
  if(now - lastClickTime > 1500) clickStreak = 0;
  lastClickTime = now;
  clickStreak++;

  let multiplier = 1;
  if(clickStreak >= 170) multiplier = 4;
  else if(clickStreak >= 100) multiplier = 3;
  else if(clickStreak >= 50) multiplier = 2;

  const pointsToAdd = clickPower * multiplier;
  points += pointsToAdd;
  totalPoints += pointsToAdd;
  document.getElementById("points").textContent = points;
  document.getElementById("totalPoints").textContent = totalPoints;
  document.getElementById("multiplier").textContent = "x"+multiplier;

  document.getElementById("clickSound").play();
  showPointFloat("+"+pointsToAdd);
  updatePrestigeNotice();
  autoDecorate();
  save();
}

setInterval(()=>{
  if(Date.now()-lastClickTime>1500 && clickStreak>0){
    clickStreak=0;
    document.getElementById("multiplier").textContent="x1";
  }
},200);

function showPointFloat(text){
  const float=document.createElement("div");
  float.className="point-float";
  float.textContent=text;
  const btn=document.querySelector(".click-button");
  const rect=btn.getBoundingClientRect();
  float.style.left=rect.left+rect.width/2+"px";
  float.style.top=rect.top+"px";
  document.body.appendChild(float);
  setTimeout(()=>float.remove(),1000);
}

function openLocationMenu(){ document.getElementById("locationMenu").style.left="0"; }
function closeLocationMenu(){ document.getElementById("locationMenu").style.left="-250px"; }
function openShopMenu(){ document.getElementById("shopMenu").style.right="0"; updateShop(); }
function closeShopMenu(){ document.getElementById("shopMenu").style.right="-300px"; }
function goToLocation(url){ location.href=url; }

function switchTab(tab){
  shopTab=tab;
  document.querySelectorAll("#shopMenu button.tab").forEach(b=>b.classList.remove("active"));
  if(tab==='click') document.querySelector("#shopMenu button.tab:first-child").classList.add("active");
  else document.querySelector("#shopMenu button.tab:last-child").classList.add("active");
  updateShop();
}

function updateShop(){
  const shopItems=document.getElementById("shopItems");
  shopItems.innerHTML="";
  if(shopTab==='click'){
    clickMultipliers.forEach((u,i)=>{
      let div=document.createElement("div");
      div.className="item";
      div.innerHTML=`–ö–ª–∏–∫ x${u.multiplier} ‚Äî ${u.cost} –æ—á–∫–æ–≤
      <button onclick="buyClickUpgrade(${i})">–ö—É–ø–∏—Ç—å</button>`;
      shopItems.appendChild(div);
    });
  }else{
    autoUpgrades.forEach((u,i)=>{
      let div=document.createElement("div");
      div.className="item";
      div.innerHTML=`–ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä +${u.power} ‚Äî ${u.cost} –æ—á–∫–æ–≤
      <button onclick="buyAutoClicker(${i})">–ö—É–ø–∏—Ç—å</button>`;
      shopItems.appendChild(div);
    });
  }
}

function buyClickUpgrade(i) {
  const upgrade = clickMultipliers[i];
  if (points >= upgrade.cost) {
    points -= upgrade.cost;
    clickPower = upgrade.multiplier + prestigeLevel;

    // –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –º–Ω–æ–∂–∏—Ç–µ–ª–∏
    clickMultipliers.splice(0, i + 1);

    showMessage(`–ö–ª–∏–∫ —Ç–µ–ø–µ—Ä—å x${clickPower}!`, "green");
    save();
  } else {
    highlightScreen();
  }

  updateShop();
}

function buyAutoClicker(i){
  let upgrade=autoUpgrades[i];
  if(points>=upgrade.cost){
    points-=upgrade.cost;
    autoClickers+=upgrade.power;
    showMessage(`–ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä–æ–≤: ${autoClickers}`,"blue");
    save();
  }else highlightScreen();
  updateShop();
}

function autoClickLoop(){
  let now=Date.now();
  let elapsed=Math.floor((now-lastTime)/5000);
  if(elapsed>0 && autoClickers>0){
    points+=elapsed*autoClickers;
    totalPoints+=elapsed*autoClickers;
    lastTime=now;
    document.getElementById("points").textContent=points;
    document.getElementById("totalPoints").textContent=totalPoints;
    updatePrestigeNotice();
    autoDecorate();
    save();
  }
  setTimeout(autoClickLoop,1000);
}

function showMessage(msg,color){
  const el=document.getElementById("message");
  el.textContent=msg;
  el.style.color=color;
  setTimeout(()=>el.textContent="",2000);
}

function highlightScreen(){
  document.body.classList.add("highlight");
  setTimeout(()=>document.body.classList.remove("highlight"),500);
}

function confirmReset(){
  if(confirm("–°–±—Ä–æ—Å–∏—Ç—å –≤–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å?")){
    localStorage.clear();
    location.reload();
  }
}

function updatePrestigeNotice(){
  const nextPrestige=prestigeLevel===0?10000:25000;
  const notice=document.getElementById("prestigeNotice");
  notice.style.display=points>=nextPrestige?"block":"none";
}

function doPrestige(){
  prestigeLevel++;
  clickPower=1+prestigeLevel;
  points=0; autoClickers=0;
  document.getElementById("prestigeCount").textContent=prestigeLevel;
  document.querySelectorAll(".decoration").forEach(e=>e.remove());
  decorationsShown=[];
  save();
  updateShop();
  updatePrestigeNotice();
  alert(`–ü—Ä–µ—Å—Ç–∏–∂ #${prestigeLevel}! –ö–ª–∏–∫ —Ç–µ–ø–µ—Ä—å +${clickPower}`);
}

const autoDecor=[
  { points:100, emoji:"üéà" },
  { points:500, emoji:"üß∏" },
  { points:1000, emoji:"üåü" },
  { points:2500, emoji:"üéÅ" },
  { points:5000, emoji:"ü™Ñ" },
  { points:10000, emoji:"üèÜ" }
];

function autoDecorate(){
  autoDecor.forEach(obj=>{
    if(points>=obj.points && !decorationsShown.includes(obj.emoji)){
      addDecoration(obj.emoji);
      decorationsShown.push(obj.emoji);
    }
  });
}

function addDecoration(emoji){
  let el=document.createElement("div");
  el.className="decoration";
  el.textContent=emoji;
  el.style.top=Math.random()*80+"%";
  el.style.left=Math.random()*80+"%";
  document.body.appendChild(el);
}

function toggleTheme(){
  document.body.classList.toggle("dark");
  localStorage.setItem("theme", document.body.classList.contains("dark")?"dark":"light");
}

function loadTheme(){
  const theme=localStorage.getItem("theme");
  if(theme==="dark") document.body.classList.add("dark");
  else document.body.classList.remove("dark");
}
loadTheme();

function save(){
  localStorage.setItem("clickerSave",JSON.stringify({
    points,totalPoints,clickPower,prestigeLevel,autoClickers,clickStreak,lastTime,decorationsShown
  }));
}

function load(){
  let data=JSON.parse(localStorage.getItem("clickerSave"));
  if(data){
    points=data.points??0;
    totalPoints=data.totalPoints??0;
    clickPower=data.clickPower??1;
    prestigeLevel=data.prestigeLevel??0;
    autoClickers=data.autoClickers??0;
    clickStreak=data.clickStreak??0;
    lastTime=data.lastTime??Date.now();
    decorationsShown=data.decorationsShown??[];
  }
  document.getElementById("points").textContent=points;
  document.getElementById("totalPoints").textContent=totalPoints;
  document.getElementById("prestigeCount").textContent=prestigeLevel;
  updateShop();
  updatePrestigeNotice();
  autoDecorate();
}

load();
autoClickLoop();
</script>
</body>
</html>